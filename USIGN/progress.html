<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>USIGN : Sample</title>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta content="Premium Multipurpose Admin & Dashboard Template" name="description" />
<meta content="" name="author" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />




<!-- App favicon -->
<link rel="shortcut icon" href="resource/images/favicon.ico">

<!--font icon-->
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">

<!-- App css -->
<link href="resource/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
<link href="resource/css/jquery-ui.min.css" rel="stylesheet">
<link href="resource/css/icons.min.css" rel="stylesheet" type="text/css" />
<link href="resource/css/style.css" rel="stylesheet" type="text/css" />
<link href="resource/css/font.css" rel="stylesheet" type="text/css" />


<!-- jQuery  -->
<script src="resource/js/jquery.min.js"></script>
<script src="resource/js/jquery-ui.min.js"></script>
<script src="resource/js/bootstrap.bundle.min.js"></script>
<script src="resource/js/jquery.validate.min.js"></script>
<script src="resource/js/script.js"></script>




<!-- Plugins -->


<!-- 파일 업로드 -->
<link href="plugins/croppie/croppie.css" rel="stylesheet"> 
<script src="plugins/croppie/croppie.js"></script>

<link href="plugins/dropify/css/dropify.min.css" rel="stylesheet">
<script src="plugins/dropify/js/dropify.min.js"></script>
<script src="resource/pages/jquery.form-upload.init.js"></script>


<!-- 캔버스 -->
<script src="plugins/html2canvas/html2canvas.min.js"></script>
<script src="resource/js/es6-promise.auto.js"></script>


<!-- colorpicker -->
<link href="plugins/bootstrap-colorpicker/css/bootstrap-colorpicker.css" rel="stylesheet" type="text/css" />
<script src="plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js"></script>


<!-- pdf -->
<script src="plugins/mozilla-pdf/pdf.js"></script>
<script src="resource/pages/jquery.pdf.init.js"></script>


<script src="plugins/signature_pad/signature_pad.min.js"></script>

<script src="resource/js/sign.stamp.js"></script>
<script src="resource/js/sign.watermark.js"></script>
<script src="resource/js/sign.text.js"></script>

</head>
<body>


<!-- 로딩 -->
<section class="loding_section">
	<div class="loding_wrapper">
		<div class="circle"></div>
		<div class="circle"></div>
		<div class="circle"></div>
		<div class="shadow"></div>
		<div class="shadow"></div>
		<div class="shadow"></div>
	</div>
</section>


<div class="container-fluid">
  <div class="row">

    <div class="col-xl-4 side-container">
			<form id="apiForm" name="apiForm" method="POST">
      <div class="card">

          <input type="hidden" name="sign_mode" value="single">

					<input type="hidden" name="contract_key" value="##KEY##">
					<input type="hidden" name="file_name" value="Sample.pdf">

          <input type="hidden" name="scale" value="1">
          <input type="hidden" name="now_page" value="1">
          <input type="hidden" name="max_page">

          <input type="hidden" name="act_type">
          <input type="hidden" name="isLtv">

          <input type="hidden" name="stampType" value="Local">
          <input type="hidden" name="stampKey" value="">
          <input type="hidden" name="stampX" value="100">
          <input type="hidden" name="stampY" value="100">
          <input type="hidden" name="stampWidth" value="">
          <input type="hidden" name="stampHeight" value="">

          <input type="hidden" name="signType" value="Visible">
          <input type="hidden" name="signOption" value="Stamp">

          <input type="hidden" name="signPage">
          <input type="hidden" name="signPosPage">

          <input type="hidden" name="wmImageType" value="Local">
          <input type="hidden" name="wmImageWidth" value="0">
          <input type="hidden" name="wmImageHeight" value="0">
          <input type="hidden" name="wmX" value="400">
          <input type="hidden" name="wmY" value="800">
          <input type="hidden" name="wmImageKey">
					
          <input type="hidden" name="textNum" value="0">

          <input type="hidden" name="fileType" value="URL">
          <input type="hidden" name="filePath" value="https://www.ucert.co.kr/friday/do_download" required>
          <input type="hidden" name="fileStatus" value="52000" required>

          <input type="hidden" name="browser" value="Chrome" required>

          <div class="card-header side-title">
            <h3 class="">서명하기</h3>
          </div>

          <div class="card-body side-content">
						
						<div class="card-box mt-0">
							<div class="box-header">
								텍스트 추가
								<div class="box-header-btn">
									<button class="btn btn-sm btn-text px-3" type="button" onclick="text_add()">
										<i class="fas fa-plus pr-1"></i> 추가
									</button>
								</div>
							</div>
							<div class="box-body text_menu_list hidden"></div>
						</div>

						<div class="card-box">
              <div class="box-header">
               워터마크
								<div class="box-header-btn">
									<div class="custom-switch">
										<input type="checkbox" class="custom-control-input" id="wm_use" name="wm_use" onchange="change_wm_use(this.value)" >
										<label class="custom-control-label" for="wm_use" style="margin-top: 8px"></label>
										<span class="wm_onoff">OFF</span>
									</div>
								</div>
              </div>

              <div class="box-body wm_box hidden">
                
                <div class="form-group wm_opction_use">
                 
									<dl class="row">
                    <dt class="col-sm-3 form-label">타입</dt>
                    <dd class="col-sm-9">
                      <div class="btn-group btn-group-toggle btn-block" data-toggle="buttons">
                        <label class="btn btn-outline-main btn-sm">
                          <input type="radio" name="wmType" value="Text" onclick="chagne_wm_type(this.value)" checked> 문자형
                        </label>
                        <label class="btn btn-outline-main btn-sm">
                          <input type="radio" name="wmType" value="Image" onclick="chagne_wm_type(this.value)"> 이미지형
                        </label>
                      </div>
                    </dd>
                  </dl>

                  <dl class="row wm_text_option">
                    <dt class="col-sm-3 form-label">텍스트</dt>
                    <dd class="col-sm-9">
											<input class="form-control" type="text" name="wmText" value="USIGN Sample" placeholder="워터마크 텍스트" onkeyup="wm_option()">
										</dd>

                    <dt class="col-sm-3 form-label">텍스트색상</dt>
    								<dd class="col-sm-9">
    									<div id="b_color-default" class="input-group colorpicker-element colorPicker" title="Using input value" data-colorpicker-id="1">
    										<input class="wm_color_input form-control" type="text" name="wmColor" value="#F90006" onchange="wm_option()">
    										<span class="input-group-append">
    											<span class="input-group-text colorpicker-input-addon" data-original-title="" title="" tabindex="0" aria-describedby="popover579233">
    												<i style="background: rgb(184, 130, 35);"></i>
    											</span>
    										</span>
    									</div>
                    </dd>

                    <dt class="col-sm-3 form-label">텍스트크기</dt>
                    <dd class="col-sm-9">
                      <input type="range" class="custom-range pt-3" min="10" max="140" step="1" value="40" id="wmSize" name="wmSize" style="width: 88%" oninput="wm_option()">
                      <label for="wmSize" class="wmSize_val" style="padding-left: 10px">40</label>
                    </dd>
                  </dl>

                  <dl class="row wm_image_option hidden">
                    <dt class="col-sm-3 form-label">이미지</dt>
                    <dd class="col-sm-9"><input class="form-control" type="file" name="wmImage" accept="image/*" onchange="change_wm_img(this)"></dd>
                  </dl>

                  <dl class="row">
                    <dt class="col-sm-3 form-label">위치</dt>
                    <dd class="col-sm-9">
                      <select class="form-control" name="wmPos" onchange="change_wm_pos(this.value)">
                        <option value="0">직접 설정</option>
                        <option value="leftTop">좌측상단</option>
                        <option value="rightTop">우측상단</option>
                        <option value="leftBottom">좌측하단</option>
                        <option value="rightBottom">우측하단</option>
                      </select>
                    </dd>

    								<input type="hidden" id="wmRotate" name="wmRotate" value="0">
    						
                    <dt class="col-sm-3 form-label">투명도</dt>
                    <dd class="col-sm-9">
                      <input type="range" class="custom-range pt-3" min="0" max="100" step="1" id="wmOpacity" name="wmOpacity" value="40" style="width: 88%" oninput="wm_option()">
                      <label for="wmOpacity" class="wmOpacity_val" style="padding-left: 5px">40%</label>
                    </dd>


                  </dl>

                </div>

              </div>
            </div>

            <div class="card-box">
              <div class="box-header">
                요청자 서명 진행
              </div>

              <div class="box-body">

                <div class="form-group mb-0">
                  <dl class="row">
    								<dt class="col-sm-12 visible_box form-label">
                      <h5 class="mt-0">공문형 서명 - 보이는 서명</h5>
                      <p class="p_text">
                        공문형 서명으로 서명 패널에서 서명 정보를 확인할 수 있으며, <br>
                        서명 위치 지정과 워터마크 기능이 제공됩니다. 서명의 노출 유무를 선택할 수 있습니다.
                      </p>
                    </dt>
                    <dt class="col-sm-12 invisible_box form-label hidden">
                      <h5 class="mt-0">공문형 서명 - 보이지 않는 서명</h5>
                      <p class="p_text">
                        공문형 서명으로 서명 패널에서 서명 정보를 확인할 수 있으며, <br>
                        서명 위치 지정과 워터마크 기능이 제공됩니다. 서명의 노출 유무를 선택할 수 있습니다.
                      </p>
                    </dt>

                    <dd class="col-sm-12">
                      <div class="btn-group btn-group-toggle btn-block" data-toggle="buttons">
                        <label class="btn btn-outline-main active">
                          <input type="radio" name="signTypeOption" value="Visible" onchange="change_sign_type_option(this.value)" checked> 보이는 서명
                        </label>
                        <label class="btn btn-outline-main">
                          <input type="radio" name="signTypeOption" value="Invisible" onchange="change_sign_type_option(this.value)"> 보이지 않는 서명
                        </label>
                      </div>
                    </dd>
                  </dl>

                  <div class="bg-box visible_box none_sign">
                    <h5 class="text-center my-1">
                      <b class="text-danger" data-toggle="modal" data-target="#stampModal">Stamp 선택</b>을 클릭해 서명을 진행하세요.
                    </h5>
                  </div>

                  <div class="bg-box add_sign hidden">
                    <div class="row">
											<div class="col-sm-4 p-3">
												<img class="bg-white p-3 w-100" src="#">
											</div>
											<div class="col-sm-8 p-3">
												<h5 class="mb-0"><b class="text-danger">요청자</b>님의 서명</h5>
												<p class="my-2" style="font-size: 12px">서명 영역을 클릭하여 설정을 변경할 수 있습니다.</p>
												<button type="button" class="btn btn-outline-danger btn-xs" data-toggle="modal" data-target="#stampModal">서명 다시하기</button>
											</div>
                    </div>
                  </div>

    							<div class="bg-box invisible_box none_sign hidden">
                    <h5 class="text-center my-1">보이지 않는 서명은 서명(스탬프) 없이 진행되는 서명 방식입니다.</h5>
                  </div>

									<dl class="row visible_box">
										<dt class="col-sm-6 form-label">서명 위치 페이지</dt>
										<dd class="col-sm-6 stemp_pos_page">
											<div class="btn-group float-right stemp_page_btn" role="group" aria-label="Basic example">
												<button type="button" class="btn btn-outline-light" onclick="gotoPage_sign('sign', 'prev')"><i class="fas fa-caret-left"></i></button>
												<button type="button" class="btn btn-outline-light" name="now_page_sign" value="1" onclick="gotoPage_sign('sign', this.value)">
													<span class="now_page_sign">1</span> Page
												</button>
												<button type="button" class="btn btn-outline-light" onclick="gotoPage_sign('sign', 'next')"><i class="fas fa-caret-right"></i></button>
											</div>
										</dd>
									</dl>

                </div>
              </div>
            </div>

            <div class="card-box">
              <div class="box-header">
               문서 설정
              </div>

              <div class="box-body">
                <div class="form-group">
                   <dl class="row mb-0">
                    <input type="hidden" name="document_type" value="1">
    								<dt class="col-sm-3 form-label">문서 이름</dt>
                    <dd class="col-sm-9"><input type="text" class="form-control" name="resultFileName" value="Sample_sign" placeholder="결과 파일명"></dd>
    								<dt class="col-sm-3 form-label">문서 암호</dt>
                    <dd class="col-sm-9"><input type="text" class="form-control" name="encryptPwd" placeholder="암호"></dd>
                  </dl>
                </div>
              </div>

            </div>

            <div class="card-body p-0 mt-3">
              <button type="button"class="btn btn-info btn-block complete_btn py-2" onClick="complete_chk()" disabled
                data-content="서명을 위한 준비가 모두 완료되었습니다. <br> 버튼을 클릭하여 서명을 완료해주세요."
                data-container="body"
                data-toggle="popover"
                data-html="true">
                <i class="fas fa-pen-nib"></i> 서명 완료
              </button>
            </div>

          </div>

      </div><!--end card-->


    </form>

    </div><!--end col-->

    <div class="col-xl-8">

      <div class="card">
				<div class="card-header py-1">
					<h4 class="float-left form-label mt-1">Sample</h4>
					<div class="btn-group float-right stemp_page_btn p-2" role="group" aria-label="Basic example" style="text-align: center">
						<button type="button" class="btn btn-outline-light" onclick="gotoPage('prev')"><i class="fas fa-caret-left"></i></button>
						<button type="button" class="btn btn-outline-light dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span class="now_page">1</span> / <span class="max_page">0</span></button>
						<div class="dropdown-menu page_menu"></div>
						<button type="button" class="btn btn-outline-light" onclick="gotoPage('next')"><i class="fas fa-caret-right"></i></button>
					</div>
				</div>

        <div class="card-body document_preview">

					<form id="textForm" method="post" action="/" onSubmit="return false">

						<div class="document w-100">
							<canvas id="the-canvas" style="position: absolute"></canvas>

							
							<!-- 워터마크 box -->
							<div id="draggable_wm" class="draggable_box hidden p-3">
								<p class="text_board_name">워터마크</p>
								<div class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
									<p class="mb-0">USIGN Sample</p>
									<img style='width:100%; height:100%; display: none' src="">
								</div>

								<div class="dropdown-menu round p-3 my-2">
									<input class="form-control text_text" name="wmTextSub" rows="1" value="SIGN Sample" placeholder="텍스트를 입력해주세요." onkeyup="wm_option_sub()">
									<div class="form-inline mt-1">
											<div class="col-md-4 p-0 pt-1">
												<div class="colorPicker input-group">
													<input type="hidden" name="wmColorSub" value="#FF4228" onchange="wm_option_sub()">
													<span class="input-group-append">
														<span class="input-group-text round colorpicker-input-addon form-label"><i></i></span>
													</span>
												</div>
											</div>

											<div class="col-md-8 p-0">
												<div class="btn-group number_group">
													<button type="button" class="form-control size_minus_btn px-2" value="0" data-toggle="click" onclick="count_change('wmSize', 'minus')" style="color: #CCC">
														<i class="fas fa-minus font-12"></i>
													</button>
													<input class="form-control text-center px-0" type="number" name="wmSize" min="10" max="140" value="32" placeholder="크기" style="width: 100%" onfocusout="count_change('wmSize', 'key')">
													<button type="button" class="form-control size_plus_btn px-2" value="0" data-toggle="click" onclick="count_change('wmSize', 'plus')" style="color: #CCC">
														<i class="fas fa-plus font-12"></i>
													</button>
												</div>
											</div>

										</div>
									<button class="btn btn-link mt-1 py-0 float-right" type="button" onclick="close_text(this)">닫기</button>
								</div>
							</div>

							<!-- 서명 box -->
							<div id="draggable_stamp" class="bg-box visible_box"
								ondblclick="resign()"
								data-page="0"
								data-content="영역을 드래그하여 위치를 이동하거나, <br>클릭하여 설정을 변경할 수 있습니다."
								data-container="body"
								data-toggle="popover"
								data-trigger="focus"
								data-html="true"
							>
								<p class="stamp_title mb-2">요청자님의 서명</p>
								<button class="btn btn-danger btn-block"
									data-toggle="modal"
									data-target="#stampModal">
									Stamp 선택
								</button>

								<img class="dropdown-toggle" style="width:100%; height:100%; display: none" src="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								<div class="dropdown-menu round p-3 my-2">
									
									<b class="float: left" style="line-height: 38px;">서명 페이지</b>
									<div class="btn-group float-right stemp_page_btn mt-1" role="group" aria-label="Basic example">
										<button type="button" class="btn btn-outline-light size_minus_btn" onclick="gotoPage_sign('sign', 'prev')"><i class="fas fa-caret-left"></i></button>
										<button type="button" class="btn btn-outline-light size_plus_btn" onclick="gotoPage_sign('sign', 'next')"><i class="fas fa-caret-right"></i></button>
									</div>
									<button type="button" class="btn btn-outline-danger btn-xs btn-block mt-3" data-toggle="modal" data-target="#stampModal">서명 다시하기</button>
								</div>
							</div>


						</div>

						<div class="page_btn">
							<button class="btn btn-gray btn-prev" onclick="gotoPage('prev')"><i class="fas fa-chevron-left"></i></button>
							<button class="btn btn-gray btn-next" onclick="gotoPage('next')"><i class="fas fa-chevron-right"></i></button>
						</div>
						
					</form>

        </div><!--end card-body-->
      </div><!--end card-->
    </div><!--end col-->
  </div><!--end row-->

</div><!-- container -->



<form action="/sign/success" name="successForm" method="POST" style="display:none">
  <input type="hidden" name="contractKey">
  <input type="hidden" name="downloadLink">
  <input type="hidden" name="resultFileName">
	<input type="hidden" name="successSignType" value="Visible">
</form>



<!-- Modal:서명 -->
<div class="modal fade bd-example-modal-lg" id="stampModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-round">
      <div class="modal-header bg-white border-round-top p-4" style="border: none">
        <h4 class="modal-title mt-0" id="stampModalLabel">서명 / 도장 선택</h4>
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      </div>
      <div class="modal-body px-4 pb-4 pt-0">
        <!-- Nav tabs -->
				<ul class="nav nav-tab nav-justified p-2 border-round sign_tab">
				
					<li class="nav-item">
						<a class="nav-link border-round p-2 active" data-toggle="tab" href="#sign-draw" role="tab">
							사인 그리기
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link border-round p-2" data-toggle="tab" href="#sign-font" role="tab">사인 만들기</a>
					</li>
					<li class="nav-item">
						<a class="nav-link border-round p-2" data-toggle="tab" href="#sign-upload" role="tab">업로드</a>
					</li>
				</ul>


        <!-- Tab panes -->
				
        <div class="tab-content mb-3">
					
					<div class="tab-pane active" id="sign-draw" role="tabpanel">
            <div class="sign-draw border-round p-2 mt-3" style="border: 1px solid #ddd !important">
							<form method="post" action="" class="sigPad">
								
								<canvas id="the-canvas" class="pad" width="440" height="250"></canvas>
								<button class="sign_reset btn btn-link text-blue" type="reset" style="width: 100%; border-top: 1px solid #ddd">Delete Sign <i class="fas fa-trash pl-2"></i></button>
							</form>
					
            </div>

          </div>

          <div class="tab-pane" id="sign-font" role="tabpanel">
            <form class="form-inline mt-2">
              <input class="form-control font-18 mr-2 pl-3" style="width: 80%; border: none" name="sign_text" type="text" value="요청자" maxlength="20">
              <button class="btn btn-link sign_text_btn" type="button" style="width: 18%" data-type="#sign-font">입력</button>
            </form>
            <hr style="margin-top:0">
            <div class="row mt-3" style="max-height: 350px; overflow:scroll">
              <div class="col-md-6 sign-wrap active">
                <div class="border border-round">
										<div class="sign-ex"><span class="text-wrap" style="font-family: 'KCC-eunyoung'">요청자</span></div>
                  </div>
              </div>
							<div class="col-md-6 sign-wrap">
                <div class="border border-round">
										<div class="sign-ex sign-ex-sm"><span class="text-wrap" style="font-family: 'Kangbujang'">요청자</span></div>
                  </div>
              </div>
							<div class="col-md-6 sign-wrap">
								<div class="border border-round">
									<div class="sign-ex"><span class="text-wrap" style="font-family: 'InkLipquid'">요청자</span></div>
								</div>
							</div>
							<div class="col-md-6 sign-wrap">
								<div class="border border-round">
									<div class="sign-ex"><span class="text-wrap" style="font-family: 'Cafe24Shiningstar'">요청자</span></div>
								</div>
							</div>
							<div class="col-md-6 sign-wrap">
								<div class="border border-round">
									<div class="sign-ex sign-ex-sm"><span class="text-wrap" style="font-family: 'ROEHOE-CHAN'">요청자</span></div>
								</div>
							</div>
							<div class="col-md-6 sign-wrap">
								<div class="border border-round">
									<div class="sign-ex"><span class="text-wrap" style="font-family: 'mom_to_daughter'">요청자</span></div>
								</div>
							</div>
            </div>
          </div>
          
          <div class="tab-pane" id="sign-upload" role="tabpanel">

						<div class="border-round p-2 mt-3" style="border: 1px solid #ddd !important">
							<input type="file" id="sign_file_upload" class="form-control sign_image text-blue" accept="image/*" style="border: none">	
							<hr style="margin: 0.5rem">

							<div class="demo-wrap upload-demo">

								<label for="sign_file_upload" style="display: block">
									<div class="upload-msg sign-draw demo text-center text-info" style="line-height: 230px;">파일을 선택해주세요.</div>
								</label>

								<div class="upload-demo-wrap border-round">
									<div id="upload-demo" class="border-round"></div>
								</div>

							</div>
						
            </div>
						
          </div>
        </div>

				<div class="form-group mb-0 mt-2">
					<button class="btn btn-danger btn-block btn-round waves-effect waves-light py-2 sign_add" onclick="sign_add('#sign-draw')">
						<i class="fas fa-archive pr-2"></i>서명 입력하기
					</button>
				</div> <!--end form-group-->     
				
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->





<!-- Modal:서명확인메세지 -->
<div class="modal fade bs-example-modal-center" id="successModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <button type="button" class="close text-right p-2" data-dismiss="modal" aria-hidden="true">×</button>

      <div class="modal-body pt-0">

        <div class="text-center">
          <i class="far fa-check-circle text-blue mb-3" style="font-size: 54px"></i>
          <h3>전자서명을 진행하시겠습니까?</h3>
          <ul class="text-left font-14 my-4 pl-5">
            <li>문서 내용에 이상이 없는지 다시 한 번 확인해주세요.</li>
            <li><span class="text-danger">서명이 완료되면 서명 건 수가 차감됩니다.</span></li>
            <li><span class="text-danger">서명된 문서는 다시 수정할 수 없습니다.</span></li>
          </ul>
        </div>
        <div class="text-center mt-4 mb-2">
          <button class="btn btn-blue waves-effect waves-light px-5" type="button" onclick="isubmit()">서명 진행</button>
        </div>
      </div>

    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->



<script>


$(function() {

	stamp_offset();
  wm_offset();
	text_index();


  $(".loding_section").fadeIn(600); // PDF.js 로딩 완료 시 fadeOut
  $(".sign_left").slideDown(600);

	$("#draggable_stamp").draggable({
    scroll: true,
    containment: "parent",
    drag: function() {
      stamp_offset();
      $("#draggable_stamp").popover("dispose");
    },
		stop: function() {
			$(".document").trigger("click");
    },
  });

  $("#draggable_wm").draggable({
    scroll: true,
    containment: "parent",
    start: function() { // 최초 이벤트
			$("[name=wmPos]").val("0").prop("selected", true); // 워터마크 위치 "직접 설정"으로 변경
		},
    drag: function() {
    },
		stop: function() {
			$(".document").trigger("click");
		},
  });


});


// 동적으로 생성된 요소에 draggable 
$(document).on("mouseover", ".draggable_text", function(){

	$(this).draggable({
		scroll: true,
		containment: "parent",
		drag: function() {
			text_offset();
		},
		stop: function() {
			$(".document").trigger("click");
		},
	});

});





function complete_chk() 
{
	var text_chk = false;

	$(".text_menu_box").each(function(index, item){
		
		var val = $(this).find(".text_text").val();
		if (val.replace(/(^\s*)|(\s*$)/, '') == "")	{
			text_chk = $(this).find(".text_text").attr("name");
		}

	});

	if (text_chk) {

		$("[name="+text_chk+"]").focus();
		alert("텍스트가 입력되지 않은 박스가 있습니다.");
		return false;	
	
	} else {
		$("#successModal").modal("show");
	}


}


function isubmit()
{
	stamp_offset();
	wm_offset();


	if ($("[name=wmType]").val() == "Text") {
		var wmH = $("[name=wmImageHeight]").val();
		var wmY = $("[name=wmY]").val() - ($("[name=wmImageHeight]").val() * 0.45);
		$("[name=wmY]").val(wmY);
	}

  var wm_use = $("[name=wm_use]").is(":checked");
  if (!wm_use) {
    $("[name=wmType]").val("");
  }

	$(":disabled").attr("disabled", false);
  $("[name=act_type]").val("API");
  $(".loding_section").fadeIn(600);


	var len = $(".draggable_text").length;
	$("[name=textNum]").val(len);

  var formdata = $("#apiForm, #textForm").serialize();

	var formSerializeArray = $("#apiForm, #textForm").serializeArray();
	var object = {};
	for (var i = 0; i < formSerializeArray.length; i++){
			object[formSerializeArray[i]["name"]] = formSerializeArray[i]["value"];
	}
	 
	var json = JSON.stringify(object);
	alert(json);
	console.log(json);


}

</script>